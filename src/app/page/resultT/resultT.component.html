<td-layout>
  <td-layout-nav toolbarTitle="{{title}}">

    <div td-toolbar-content layout="row" layout-align="start center" fxFlex="true">
      <span fxFlex="true"></span>
      <button class="overflow-visible" mat-icon-button (click)="disable()">
        <mat-icon>close</mat-icon>
      </button>
    </div>

    <div *ngIf="resultModel1.length == 0" style="margin-top: 80px"></div>
    <div *tdLoading="'result'; mode:'indeterminate'; type:'circle'; strategy:'overlay'; color:'accent'">

      <div class="content" fxLayout="row">
        <div fxFlex>
          <ng-template ngFor let-model [ngForOf]="resultModel1" let-currentModelIndex="index">

            <mat-card class="card">
              <mat-card-header>
                <mat-card-title>{{model.name}} - {{model.summary}}:{{(model.inputs.length - 2) - model.summary}}
                </mat-card-title>
                <button *ngIf="preCopy"
                        style="width: 16px;height: 16px;position: absolute;right: 15px;top: -7px;"
                        mat-icon-button
                        (focus)="copy(model)">
                  <mat-icon style="font-size: 16px;" aria-label="Example icon-button with a heart icon">playlist_add_check
                  </mat-icon>
                </button>

                <button *ngIf="!preCopy"
                        style="width: 16px;height: 16px;position: absolute;right: 15px;top: -7px;"
                        mat-icon-button
                        (cbOnError)="showMessage('copy ล้มเหลว')"
                        (cbOnSuccess)="showMessage('copy สำเร็จ')"
                        ngxClipboard
                        [cbContent]="copyText">
                  <mat-icon style="font-size: 16px;" aria-label="Example icon-button with a heart icon">library_books</mat-icon>
                </button>
              </mat-card-header>
              <ng-template ngFor let-input [ngForOf]="model.inputs" let-currentInputsIndex="index">

                <div fxLayout="row">
                  <div>{{input.time}}</div>
                  <div *ngIf="currentInputsIndex == (model.inputs.length - 1)">ถัดไป</div>
                  <div *ngIf="currentInputsIndex != 0 " style="margin-left: 0px;margin-right: 0px;">=</div>
                  <div *ngIf="currentInputsIndex != 0">{{model.inputs[currentInputsIndex - 1].value}}</div>
                  <div *ngIf="currentInputsIndex != 0 && currentInputsIndex != (model.inputs.length - 1)"
                       style="margin-left: 0px;margin-right: 0px;">=
                  </div>

                  <div *ngIf="currentInputsIndex != 0 && currentInputsIndex != (model.inputs.length - 1)">
                    {{input.up}}-{{input.low}}
                  </div>

                  <div *ngIf="currentInputsIndex != 0 && currentInputsIndex != (model.inputs.length - 1)">
                    <!--{{model.inputs[currentInputsIndex - 1].result?'เข้า':'ตาย'}}-->
                    <div *ngIf="model.inputs[currentInputsIndex - 1].result">
                      <mat-icon class="icon-true">done</mat-icon>
                    </div>
                    <div *ngIf="!model.inputs[currentInputsIndex - 1].result">
                      <mat-icon class="icon-false">clear</mat-icon>
                    </div>
                  </div>

                  <div
                    *ngIf="model.inputs[currentInputsIndex - 1]?.result == true && model.inputs[currentInputsIndex - 1].resultCount != 0">
                    ({{model.inputs[currentInputsIndex - 1]?.resultCount}})
                  </div>

                </div>

              </ng-template>

            </mat-card>

          </ng-template>
        </div>

        <div fxFlex>
          <ng-template ngFor let-model [ngForOf]="resultModel2" let-currentModelIndex="index">

            <mat-card class="card">
              <mat-card-header>
                <mat-card-title>{{model.name}} - {{model.summary}}:{{(model.inputs.length - 2) - model.summary}}
                </mat-card-title>
                <button *ngIf="preCopy"
                        style="width: 16px;height: 16px;position: absolute;right: 15px;top: -7px;"
                        mat-icon-button
                        (focus)="copy(model)">
                  <mat-icon style="font-size: 16px;" aria-label="Example icon-button with a heart icon">playlist_add_check
                  </mat-icon>
                </button>

                <button *ngIf="!preCopy"
                        style="width: 16px;height: 16px;position: absolute;right: 15px;top: -7px;"
                        mat-icon-button
                        (cbOnError)="showMessage('copy ล้มเหลว')"
                        (cbOnSuccess)="showMessage('copy สำเร็จ')"
                        ngxClipboard
                        [cbContent]="copyText">
                  <mat-icon style="font-size: 16px;" aria-label="Example icon-button with a heart icon">library_books</mat-icon>
                </button>
              </mat-card-header>
              <ng-template ngFor let-input [ngForOf]="model.inputs" let-currentInputsIndex="index">

                <div fxLayout="row">
                  <div>{{input.time}}</div>
                  <div *ngIf="currentInputsIndex == (model.inputs.length - 1)">ถัดไป</div>
                  <div *ngIf="currentInputsIndex != 0 " style="margin-left: 0px;margin-right: 0px;">=</div>
                  <div *ngIf="currentInputsIndex != 0">{{model.inputs[currentInputsIndex - 1].value}}</div>
                  <div *ngIf="currentInputsIndex != 0 && currentInputsIndex != (model.inputs.length - 1)"
                       style="margin-left: 0px;margin-right: 0px;">=
                  </div>

                  <div *ngIf="currentInputsIndex != 0 && currentInputsIndex != (model.inputs.length - 1)">
                    {{input.up}}-{{input.low}}
                  </div>

                  <div *ngIf="currentInputsIndex != 0 && currentInputsIndex != (model.inputs.length - 1)">
                    <!--{{model.inputs[currentInputsIndex - 1].result?'เข้า':'ตาย'}}-->
                    <div *ngIf="model.inputs[currentInputsIndex - 1].result">
                      <mat-icon class="icon-true">done</mat-icon>
                    </div>
                    <div *ngIf="!model.inputs[currentInputsIndex - 1].result">
                      <mat-icon class="icon-false">clear</mat-icon>
                    </div>
                  </div>

                  <div
                    *ngIf="model.inputs[currentInputsIndex - 1]?.result == true && model.inputs[currentInputsIndex - 1].resultCount != 0">
                    ({{model.inputs[currentInputsIndex - 1]?.resultCount}})
                  </div>

                </div>

              </ng-template>

            </mat-card>

          </ng-template>
        </div>

      </div>

    </div>

  </td-layout-nav>

</td-layout>
